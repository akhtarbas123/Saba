@model Poliment_UI.Models.CreateUserVM
@{
    ViewBag.Title = "SearchVotingSurveyByBlockArea";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href="~/Content/css/SearchByBlockArea.css" rel="stylesheet" />
<style type="text/css">
    .clsSpanRed {
        color: #F00;
    }

    .clsTableLeftMargin {
        margin-left: 300px;
    }

    .IncreaseTextWidth {
        width: 470px;
    }

    .clsHomeCenter {
        margin-left: 485px;
    }
     .clsSetHeaderDesc{
    margin-top: 35px;
    margin-left: 195px;
    }
</style>
<script type="text/javascript">
    $(document).ready(function () {
       $('#btnSearchVotingSurvey').click(function () {
            var blockId = $("#BlockName option:selected").val();
            if (blockId == undefined || blockId == null || blockId == "") {
                alert("Please select block to serach");
                return false;
            }

       });
       $('#BlockName').change(function () {
           var blockId = $('#BlockName option:selected').val();
           var blockName = $('#BlockName option:selected').text();
           if (blockId != undefined && blockId != null && blockId != "") {
               var sdata = {};
               sdata.blockName = blockName;
               sdata.blockId = blockId;
               $.ajax({
                   url: '/Admin/GetArea',
                   type: "POST",
                   dataType: 'json',
                   contentType: 'application/json; charset=utf-8',
                   data: JSON.stringify(sdata),
                   success: function (result) {
                       if (result != undefined) {
                           var totalLength = result.length;
                           $('#AreaName').html('');
                           $('#AreaName').append("<option value=0>Select</option>");
                           for (var i = 0; i < totalLength; i++) {
                               $('#AreaName').append("<option value='" + result[i].Id + "'>" + result[i].AreaName + "</option>");
                           }
                       }

                   },
                   error: function () {
                       alert("An error occured");
                   }
               });
           }
           else {
               return false;
           }
       });
    });
</script>

<h2 class="clsSetHeaderDesc">Search Voting Survey</h2>
@using (Html.BeginForm("SearchVotingSurveyByBlockArea", "Admin", FormMethod.Get))
{
    <span style="margin-left:440px;font-size:x-large;">Total Voting Count :<b> @Model.TotalVoterSurveyCount</b></span> 
    <br /><br />
     <table class="clsTableLeftMargin" cellspacing="15" cellpadding="0">
        <tr>
            <td class="frm-text">Select Block<span class="clsSpanRed">*</span></td>
            <td>:</td>
            <td>@Html.DropDownListFor(x => x.BlockName, new SelectList(Model.BlockML, "Id", "BlockName"), "Select", new { @class = "layoutdropdown" })</td>
        </tr>
        <tr>
            <td class="frm-text">Select Area</td>
            <td>:</td>
            <td>@Html.DropDownListFor(x => x.AreaName, new SelectList(Model.AreaML, "Id", "AreaName"), "Select", new { @class = "layoutdropdown" })</td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td>
                <input type="submit" id="btnSearchVotingSurvey" class="createbutton" value="Search" />
                <a href="/Admin/SearchVotingSurveyByBlockArea" class="cancelbutton">Reset</a>
            </td>
        </tr>
    </table>

    <br />
    <span class="errorMessage">@ViewBag.ErrorMessage</span>
}
<br />
<br />
@{
    if (ViewBag.DisplayBlockCount != null)
    {
        <span style="margin-left:440px;font-size:x-large;">Total Voting Count of<b> @Model.BlockNameForDisplay</b> Block :<b> @Model.TotalVoterSurveyCountOfBlock</b></span>
    }
}

<br />
<br />
<div>
    @if (Model.VotingSurveyML != null && Model.VotingSurveyML.Count > 0)
    {

        WebGrid grid = new WebGrid(rowsPerPage: Model.PageSize);
        grid.Bind(Model.VotingSurveyML,
        autoSortAndPage: false,
        rowCount: Model.TotalRows);

 @grid.GetHtml(
 htmlAttributes: new { @id = "WebGrid" },
 fillEmptyRows: false,
 tableStyle: "webgrid",
 alternatingRowStyle: "webgrid-alternating-row",
 headerStyle: "webgrid-header",
 footerStyle: "webgrid-footer",
 mode: WebGridPagerModes.All,
 firstText: "<< First",
 previousText: "< Prev",
 nextText: "Next >",
 lastText: "Last >>",
 columns: new[] {
 grid.Column("Id",header: "Id", canSort: false),
 grid.Column("AreaName",header: "Area Name",canSort: false),
 grid.Column("VoterIdNumber",header: "Voter Id",canSort: false),
 grid.Column("Name",header: "Name",canSort: false),
 grid.Column("Mobile",header: "Mobile",canSort: false),
 grid.Column("Address",header: "Address",canSort: false),
 grid.Column("DisplayCreatedDate",header: "Created Date(DD-MM-YYYY)",canSort: false)
})

    }
    else
    {
        if (Model.VotingSurveyML != null && Model.VotingSurveyML.Count == 0)
        {
            <h2><span style="margin-left:192px;">No record found</span></h2>
        }
    }
</div>