@model Poliment_UI.Models.CreateUserVM
@{
    ViewBag.Title = "SearchActiveUserByBlockArea";
    Layout = "~/Views/Shared/_UserMenuAfterLogin.cshtml";
}


<link href="~/Content/css/SearchByBlockArea.css" rel="stylesheet" />
<style type="text/css">
    .clsSpanRed {
        color: #F00;
    }

    .clsTableLeftMargin {
        margin-left: 300px;
    }

    .IncreaseTextWidth {
        width: 470px;
    }

    .clsHomeCenter {
        margin-left: 485px;
    }
    .clsSetHeaderDesc{
    margin-top: 35px;
    margin-left: 195px;
    }
</style>
<script type="text/javascript">
    $(document).ready(function () {
        $('#btnSearchInActiveUser').click(function () {
            var blockId = $("#BlockName option:selected").val();
            if (blockId == undefined || blockId == null || blockId == "") {
                alert("Please select block to serach");
                return false;
            }

        });
        $('.clsDelete').click(function () {
            var result = confirm("Are you sure want to delete this user");
            if (result == false) {
                return false;
            }
        });
        $('#BlockName').change(function () {
            var blockId = $('#BlockName option:selected').val();
            var blockName = $('#BlockName option:selected').text();
            if (blockId != undefined && blockId != null && blockId != "") {
                var sdata = {};
                sdata.blockName = blockName;
                $.ajax({
                    url: '/User/GetArea',
                    type: "POST",
                    dataType: 'json',
                    contentType: 'application/json; charset=utf-8',
                    data: JSON.stringify(sdata),
                    success: function (result) {
                        if (result != undefined) {
                            var totalLength = result.length;
                            $('#AreaName').html('');
                            $('#AreaName').append("<option value=0>Select</option>");
                            for (var i = 0; i < totalLength; i++) {
                                $('#AreaName').append("<option value='" + result[i].Id + "'>" + result[i].AreaName + "</option>");
                            }
                        }

                    },
                    error: function () {
                        alert("An error occured");
                    }
                });
            }
            else {
                return false;
            }
        });
    });
</script>
<h2 class="clsSetHeaderDesc">Search active user of Block or Block and Area </h2>

@using (Html.BeginForm("SearchActiveUserByBlockArea", "User", FormMethod.Get))
{
    <table class="clsTableLeftMargin" cellspacing="15" cellpadding="0">
        <tr>
            <td class="frm-text">Select Block<span class="clsSpanRed">*</span></td>
            <td>:</td>
            <td>@Html.DropDownListFor(x => x.BlockName, new SelectList(Model.BlockML, "Id", "BlockName"), "Select", new { @class = "layoutdropdown" })</td>
        </tr>
        <tr>
            <td class="frm-text">Select Area</td>
            <td>:</td>
            <td>@Html.DropDownListFor(x => x.AreaName, new SelectList(Model.AreaML, "Id", "AreaName"), "Select", new { @class = "layoutdropdown" })</td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td>
                <input type="submit" id="btnSearchInActiveUser" class="createbutton" value="Search" />
                <a href="/User/SearchActiveUserByBlockArea" class="cancelbutton">Reset</a>
            </td>
        </tr>
    </table>

}
<br />
<br />

<div>
    @if (Model.ListUserML != null && Model.ListUserML.Count > 0)
    {
        WebGrid grid = new WebGrid(rowsPerPage: Model.PageSize);
        grid.Bind(Model.ListUserML,
        autoSortAndPage: false,
        rowCount: Model.TotalRows);

        @grid.GetHtml(
 htmlAttributes: new { @id = "WebGrid" },
 fillEmptyRows: false,
 tableStyle: "webgrid",
 alternatingRowStyle: "webgrid-alternating-row",
 headerStyle: "webgrid-header",
 footerStyle: "webgrid-footer",
 mode: WebGridPagerModes.All,
 firstText: "<< First",
 previousText: "< Prev",
 nextText: "Next >",
 lastText: "Last >>",
 columns: new[] {
 grid.Column("Id",header: "Id", canSort: false),
 grid.Column("FirstName",header: "First Name"),
 grid.Column("LastName",header: "Last Name"),
 grid.Column("UserName",header: "User Name"),
 grid.Column("Mobile",header: "Mobile",canSort: false),
 grid.Column("Email",header: "Email Id",canSort: false),
 grid.Column("DOB",header: "Birth Date",canSort: false),
 grid.Column("Gender",header: "Gender",canSort: false),
 grid.Column("Designation",header: "User Designation",canSort: false),
 grid.Column("PoliticalParty",header: "Political Party",canSort: false),
 grid.Column(header: "Show Image", format:@<text>  @Html.ActionLink("Show Image", "ShowUserImage",new { id = item.Id },new {target="_blank"})</text>)

})

    }
    else
    {
        if (Model.ListUserML != null && Model.ListUserML.Count == 0)
        {
            <h2><span style="margin-left:192px;">No record found</span></h2>
        }
    }
</div>

