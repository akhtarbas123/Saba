@model Poliment_UI.Models.AdminMessageVM
@{
    ViewBag.Title = "SendMessageByAdmin";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script type="text/javascript">
    $(document).ready(function () {
        var validateBlock = "Yes";

        $('input[type="checkbox"]').click(function () {
            if ($(this).prop("checked") == true) {
                $('#RowBlock').hide();
                validateBlock = "No";
                $("#BlockName").val(0);
            }
            else if ($(this).prop("checked") == false) {
                $('#RowBlock').show();
                validateBlock = "Yes";
            }
        });

        $('#btnSendMessage').click(function () {
            var messageSubject = $("#MessageSubject").val();
            if (messageSubject == undefined || messageSubject == null || messageSubject == "") {
                alert("Please enter message subject");
                $("#MessageSubject").focus();
                return false;
            }
            var message = $("#AdminMessage").val();
            if (message == undefined || message == null || message == "") {
                alert("Please enter message");
                $("#AdminMessage").focus();
                return false;
            }
            if (validateBlock == 'Yes') {
                var blockId = $("#BlockName option:selected").val();
                if (blockId == 'undefined' || blockId == null || blockId == "") {
                    alert("Please select block");
                    return false;
                }
            }
        });
    });
   
</script>
<style type="text/css">
    .clsSetHeaderDesc{
    margin-top: 35px;
    margin-left: 195px;
    }
    .clsSpanRed {
        color: #F00;
    }
</style>
<link href="~/Content/css/Common.css" rel="stylesheet" />
<div>
    @{
        if (TempData["MessageSaved"] != null)
        {
            <script type="text/javascript">
            alert("Message sent successfully");
            </script>
            TempData.Remove("MessageSaved");
        }

    }
    @{
        if (TempData["MessageError"] != null)
        {
            <script type="text/javascript">
            alert("An error occured.Please try again.");
            </script>
            TempData.Remove("MessageError");
        }

    }
</div>
<h2 class="clsSetHeaderDesc">Send Message</h2>
<fieldset>
   @using (Html.BeginForm("SendMessageByAdmin", "Admin", FormMethod.Post, new { enctype = "multipart/form-data" }))
   {
       @Html.AntiForgeryToken()
    <table class="clsTableLeftMargin" cellspacing="10" cellpadding="10">
        <tr>
            <td>Send message to all user</td>
            <td>:</td>
            <td><input type="checkbox" id="chkAllUser" name="chkAllUser" /></td>
        </tr>
        <tr id="RowBlock">
            <td>Send message by block</td>
            <td>:</td>
            <td>
                @Html.DropDownListFor(x => x.BlockName, new SelectList(Model.BlockML, "Id", "BlockName"), "Select", new { @class = "layoutdropdown" })
            </td>
        </tr>
        <tr>
            <td>Message Subject<span class="clsSpanRed">*</span></td>
            <td>:</td>
            <td><textarea id="MessageSubject" name="MessageSubject" maxlength="780" class="reg-frm-inp"></textarea></td>
        </tr>
        <tr>
            <td>Message<span class="clsSpanRed">*</span></td>
            <td>:</td>
            <td><textarea id="AdminMessage" name="AdminMessage" class="reg-frm-inp"></textarea></td>
        </tr>
        <tr>
            <td>Attach File</td>
            <td>:</td>
            <td><input type="file" id="postedFile" name="postedFile" /></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td>
                <input type="submit" id="btnSendMessage" class="createbutton" value="Send" />
                <a href="/Admin/Dashboard" class="cancelbutton">Cancel</a>
            </td>
        </tr>
    </table>
   }

     
</fieldset>
